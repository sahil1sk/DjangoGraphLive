(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(4),r=n.n(l),c=(n(10),n(1)),o=(n(11),""),s=n(2),u="FETCH_TASK_DATA",d="CREATE_TASK",m="UPDATE_TASK",b="DELETE_TASK",p=function(e,t,n){fetch(o+"/graphqlApi/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t})}).then(function(e){if(e.ok)return e;var t=new Error("Error: "+e.status+": "+e.statusText);throw t.response=e,t},function(e){throw new Error(e.message)}).then(function(e){return e.json()}).then(function(e){n(e.data)}).catch(function(e){return alert("error: "+e.message+"\n Please refresh your page")})};function f(e,t){switch(t.type){case u:return Object(s.a)({},e,{tasks:t.payload});case d:var n=[{node:t.payload}].concat(e.tasks);return Object(s.a)({},e,{tasks:n});case m:var a=e.tasks.filter(function(e){return e.node.id===t.payload.idIs?(e.node.title=t.payload.task.title,e.node.completed=t.payload.task.completed,e):e});return Object(s.a)({},e,{tasks:a});case b:return Object(s.a)({},e,{tasks:e.tasks.filter(function(e){return e.node.id!==t.payload})});default:return e}}var k=function(e){p("\n        query {\n            allTasks(first:20){\n                edges{\n                  node{\n                    id\n                    title\n                    completed\n                  }\n                }\n            }\n        }\n    ",{id:"",title:""},e)},E=function(e,t){p("\n    mutation creatingTask( $title: String!){\n      createTask(input:{\n        title:$title\n      }){\n      task{\n          id\n          title\n          completed\n        }\n      }\n    }\n  ",{title:e},t)},v=function(e,t){var n={id:e.node.id};p("\n    mutation deleteTask( $id:ID!){\n      deleteTask(input:{\n        Id:$id\n      }){\n      task{\n          id\n        }\n      }\n    }  \n  ",n,t)},y=function(e,t,n){var a={id:e.node.id,title:e.node.title};!0===t&&(a={id:e.node.id,completed:!e.node.completed});p("\n    mutation updateTask( $id:ID! , $title: String, $completed:Boolean){\n      updateTask(input:{\n        Id:$id, title: $title, completed: $completed\n      }){\n      task{\n          id\n          title\n          completed\n        }\n      }\n    }  \n  ",a,n)},g=Object(a.createContext)();var T=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),l=n[0],r=n[1],o=Object(a.useReducer)(f,{tasks:[]}),p=Object(c.a)(o,2),T=p[0],h=p[1],w=0,j=function(e){return h({type:u,payload:e.allTasks.edges})},O=function(e){return h({type:d,payload:e.createTask.task})},S=function(e){return h({type:b,payload:w})},x=function(e){return h({type:m,payload:{idIs:w,task:e.updateTask.task}})};return Object(a.useEffect)(function(){!1===l&&(k(j),r(!0))},[]),i.a.createElement(g.Provider,{value:Object(s.a)({},T,{createTask:function(e){E(e,O)},deleteTask:function(e){w=e.node.id,v(e,S)},updatingTask:function(e,t){w=e.node.id,y(e,t,x)}})},e.children,"                              ")};function h(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],l=t[1],r=Object(a.useState)(!1),s=Object(c.a)(r,2),u=s[0],d=s[1],m=Object(a.useContext)(g),b=m.tasks,p=m.deleteTask,f=m.updatingTask,k=Object(a.useState)(!1),E=Object(c.a)(k,2),v=E[0],y=E[1],T=Object(a.useState)({node:{id:"",title:"",completed:""}}),h=Object(c.a)(T,2),w=h[0],j=h[1],O=document.getElementById("title");return!1===n&&(setTimeout(function(){d(!0)},6500),l(!0)),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container"},i.a.createElement("div",{id:"task-container"},i.a.createElement("div",{id:"form-wrapper"},i.a.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault(),""==!O.value.replace(/\s/g,"")&&(v?(w.node.title=O.value,f(w,!1),O.value="",y(!1)):((0,m.createTask)(O.value),O.value=""))}},i.a.createElement("div",{className:"flex-wrapper"},i.a.createElement("div",{style:{flex:6}},i.a.createElement("input",{className:"form-control",id:"title",type:"text",name:"title",placeholder:"Add task.."})),i.a.createElement("div",{style:{flex:1}},i.a.createElement("input",{id:"submit",className:"btn btn-warning",type:"submit",name:"Add"}))))),i.a.createElement("div",{id:"list-wrapper"},b.map(function(e){return i.a.createElement("div",{key:e.node.id,className:"task-wrapper flex-wrapper"},i.a.createElement("div",{onClick:function(){return function(e){f(e,!0)}(e)},style:{flex:7}}," ",!1===e.node.completed?i.a.createElement("span",null,e.node.title):i.a.createElement("strike",null,e.node.title)),i.a.createElement("div",{style:{flex:1}},i.a.createElement("button",{onClick:function(){return function(e){O.value=e.node.title,j(e),y(!0)}(e)},className:"btn btn-sm btn-outline-info"},"Edit")),i.a.createElement("div",{style:{flex:1}},i.a.createElement("button",{onClick:function(){return p(e)},className:"btn btn-sm btn-outline-dark delete"},i.a.createElement("i",{style:{color:"inherit"},className:"fa fa-trash"}))))})))),i.a.createElement("div",{style:!0===u?{visibility:""}:{visibility:"hidden"},id:"bubbles"},i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"}),i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"}),i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"}),i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"}),i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"}),i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"}),i.a.createElement("img",{src:o+"/static/bubble.png",alt:"bubble"})))}var w=function(){return i.a.createElement(T,null,i.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}],[[5,1,2]]]);
//# sourceMappingURL=main.f28dc7f3.chunk.js.map